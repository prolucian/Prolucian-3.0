# GitHub Copilot: expand this into the following files automatically
# - prolucian.yml
# - .github/workflows/prolucian-auto-installer.yml
# - .github/workflows/deploy-summary-daily.yml
# - .github/workflows/deploy-summary-weekly.yml
# - .github/workflows/deploy-summary-monthly.yml
# - .github/workflows/deploy-summary-quarterly.yml
# - .github/workflows/deploy-summary-annual.yml
# - .github/workflows/deploy-backfill.yml

# -------------------------
# prolucian.yml
# -------------------------
timezone: "Africa/Johannesburg"
notify: true

# -------------------------
# .github/workflows/prolucian-auto-installer.yml
# -------------------------
name: Prolucian Auto Installer
on:
  push:
    branches: [main]
jobs:
  setup:
    runs-on: ubuntu-latest
    steps:
      - name: Verify Secrets
        run: |
          missing=0
          for s in VERCEL_TOKEN VERCEL_ORG_ID VERCEL_PROJECT_ID TELEGRAM_BOT_TOKEN TELEGRAM_CHAT_ID; do
            if [ -z "${{ secrets[$s] }}" ]; then
              echo "‚ùå Missing secret: $s"
              missing=1
            fi
          done
          if [ $missing -eq 1 ]; then exit 1; fi
      - name: Notify Telegram
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: "üöÄ Prolucian is live! ‚úÖ Secrets verified üåç Timezone: Africa/Johannesburg"
      - name: Trigger Backfill Report
        uses: benc-uk/workflow-dispatch@v1
        with:
          workflow: Deploy Backfill Report
          ref: main

# -------------------------
# .github/workflows/deploy-summary-daily.yml
# -------------------------
name: Daily Deploy Summary
on:
  schedule: [{cron: "0 22 * * *"}]
  workflow_dispatch:
jobs:
  summary:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v5
        with: {python-version: '3.x'}
      - run: pip install matplotlib pandas
      - uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: "üìä Prolucian Daily Summary"

# -------------------------
# .github/workflows/deploy-summary-weekly.yml
# -------------------------
name: Weekly Deploy Summary
on:
  schedule: [{cron: "0 22 * * 0"}]
  workflow_dispatch:
jobs:
  summary:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v5
        with: {python-version: '3.x'}
      - run: pip install matplotlib pandas
      - uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: "üìä Prolucian Weekly Summary"

# -------------------------
# .github/workflows/deploy-summary-monthly.yml
# -------------------------
name: Monthly Deploy Summary
on:
  schedule: [{cron: "0 22 1 * *"}]
  workflow_dispatch:
jobs:
  summary:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v5
        with: {python-version: '3.x'}
      - run: pip install matplotlib pandas
      - uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: "üìä Prolucian Monthly Summary"

# -------------------------
# .github/workflows/deploy-summary-quarterly.yml
# -------------------------
name: Quarterly Deploy Summary
on:
  schedule: [{cron: "0 22 1 1,4,7,10 *"}]
  workflow_dispatch:
jobs:
  summary:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v5
        with: {python-version: '3.x'}
      - run: pip install matplotlib pandas
      - uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: "üìä Prolucian Quarterly Summary"

# -------------------------
# .github/workflows/deploy-summary-annual.yml
# -------------------------
name: Annual Deploy Summary
on:
  schedule: [{cron: "0 22 31 12 *"}]
  workflow_dispatch:
jobs:
  summary:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v5
        with: {python-version: '3.x'}
      - run: pip install matplotlib pandas
      - uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: "üìä Prolucian Annual Summary"

# -------------------------
# .github/workflows/deploy-backfill.yml
# -------------------------
name: Deploy Backfill Report
on:
  workflow_dispatch:
jobs:
  backfill:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v5
        with: {python-version: '3.x'}
      - run: pip install matplotlib pandas
      - uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: "üìä Prolucian Backfill Report Posted"
